$schema: https://json-schema.org/draft/2020-12/schema
type: object
properties:
  productiveOnly:
    type: boolean
  singleCell:
    anyOf:
    - type: object
      properties:
        type:
          const: noop
      required:
      - type
    - allOf:
      - type: object
        properties:
          algorithm:
            anyOf:
            - allOf:
              - type: object
                properties:
                  maxNDNDistanceForHeavyChain:
                    type: number
                  maxNDNDistanceForLightChain:
                    type: number
              - type: object
                properties:
                  type:
                    const: BronKerbosch
                required:
                - type
            - allOf:
              - type: object
                properties:
                  maxNDNDistanceForHeavyChain:
                    type: number
                  maxNDNDistanceForLightChain:
                    type: number
              - type: object
                properties:
                  type:
                    const: SingleLinkage
                required:
                - type
      - type: object
        properties:
          type:
            const: simpleClustering
        required:
        - type
  steps:
    type: array
    items:
      anyOf:
      - allOf:
        - type: object
          properties:
            maxNDNDistance:
              type: number
            threshold:
              type: number
        - type: object
          properties:
            name:
              const: AttachClonesByDistanceChange
          required:
          - name
      - allOf:
        - type: object
          properties:
            maxNDNDistance:
              type: number
        - type: object
          properties:
            name:
              const: AttachClonesByNDN
          required:
          - name
      - allOf:
        - type: object
          properties:
            algorithm:
              anyOf:
              - allOf:
                - type: object
                  properties:
                    commonMutationsCountForClustering:
                      type: integer
                    maxNDNDistanceForClustering:
                      type: number
                - type: object
                  properties:
                    type:
                      const: BronKerbosch
                  required:
                  - type
              - allOf:
                - type: object
                  properties:
                    commonMutationsCountForClustering:
                      type: integer
                    maxNDNDistanceForClustering:
                      type: number
                - type: object
                  properties:
                    type:
                      const: SingleLinkage
                  required:
                  - type
        - type: object
          properties:
            name:
              const: BuildingInitialTrees
          required:
          - name
      - allOf:
        - type: object
          properties:
            maxNDNDistanceBetweenRoots:
              type: number
        - type: object
          properties:
            name:
              const: CombineTrees
          required:
          - name
  topologyBuilder:
    type: object
    properties:
      countOfNodesToProbe:
        type: integer
      multiplierForNDNScore:
        type: number
      penaltyForReversedMutations:
        type: number
      topToVoteOnNDNSize:
        type: integer
